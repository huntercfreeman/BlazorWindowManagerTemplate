@using Fluxor.Blazor.Web.Components

@inherits FluxorComponent

@if(_cachedHtmlElementRecord is not null)
{
    <div class="bwmt_window-manager-dialog-display"
     style="@_cachedHtmlElementRecord.DimensionsRecord.BuildCssStyleString()">

     <div class="bwmt_window-manager-dialog-display-title bwmt_unselectable"
          @onmousedown="FireSubscribeToDragEventWithMoveHandle">
          <div class="bwmt_window-manager-dialog-display-title-content">
              @WindowManagerDialogRecord.WindowManagerDialogRecordDisplayName
              <BlazorWindowManager.RazorClassLibrary.Html.RenderCounter RenderCount="_renderCount" />
          </div>
          
          <div class="bwmt_window-manager-dialog-display-title-control-buttons">
              <div class="bwmt_window-manager-dialog-display-title-control-button-wrapper"
                   @onclick="MinimizeDialogOnClick"
                   @onclick:stopPropagation="true"
                   @onmousedown:stopPropagation="true">
                  <IconChromeMinimize />
              </div>
              <div class="bwmt_window-manager-dialog-display-title-control-button-wrapper">
                  <IconChromeMaximize />
              </div>
              <div class="bwmt_window-manager-dialog-display-title-control-button-wrapper"
                   @onclick="CloseDialogOnClick"
                   @onclick:stopPropagation="true"
                   @onmousedown:stopPropagation="true">
                  <IconChromeClose />
              </div>
          </div>
     </div>

     <BlazorWindowManager.RazorClassLibrary.Transformative.TransformativeDisplay HtmlElementRecord="_cachedHtmlElementRecord"
                                                                                 @ref="_transformativeDisplay" />

    <CascadingValue Name="CompleteDialogInteractionEventCallback" Value="CompleteDialogInteractionEventCallback">
        <DynamicComponent Type="WindowManagerDialogRecord.RenderedContentType"
                       Parameters="WindowManagerDialogRecord.RenderedContentParameters" />
    </CascadingValue>
</div>
}
