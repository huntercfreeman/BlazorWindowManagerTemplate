@using Fluxor.Blazor.Web.Components

@inherits FluxorComponent

@if (_cachedGridTabContainer is not null)
{
    <div class="bwmt_grid-item-display">
        @if (!_cachedGridTabContainer.GridTabRecords.Any())
        {
            <CascadingValue Name="@BlazorWindowManager.RazorClassLibrary.Grid.GridDisplay.ON_CHOSE_GRID_TAB_RECORD_ACTION_PARAMETER_NAME" IsFixed="true" Value="OnGridTabRecordChosenAction">
                @ChooseGridTabRecordRenderFragment
            </CascadingValue>
        }

        <div class="bwmt_grid-display-tabs">
            @if (_cachedGridTabContainer.ActiveTabIndex is not null)
            {
                <div class="bwmt_grid-display-change-active-tab-section">
                    @for (int i = 0; i < _cachedGridTabContainer.GridTabRecords.Length; i++)
                    {
                        var tabIndex = i;
                        var gridTabRecord = _cachedGridTabContainer.GridTabRecords[tabIndex];

                        <GridTabDisplay GridTabRecord="gridTabRecord"
                                        ActiveTabIndex="_cachedGridTabContainer.ActiveTabIndex.Value"
                                        MyTabIndex="tabIndex"/>
                    }
                </div>
            }

            <GridAddTabDisplay NextAvailableTabIndex="_cachedGridTabContainerRecord.GridTabRecords.Length"/>
        </div>
    </div>
}